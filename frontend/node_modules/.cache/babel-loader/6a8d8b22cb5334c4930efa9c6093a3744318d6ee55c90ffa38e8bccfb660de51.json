{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ResetPassword(){const[email,setEmail]=useState(\"\");const[otp,setOtp]=useState(\"\");const[newPassword,setNewPassword]=useState(\"\");const[step,setStep]=useState(1);const[message,setMessage]=useState(\"\");const[isSuccess,setIsSuccess]=useState(false);const[timer,setTimer]=useState(60);const[resendAvailable,setResendAvailable]=useState(false);// Countdown timer\nuseEffect(()=>{let interval;if(step===2&&timer>0){interval=setInterval(()=>setTimer(prev=>prev-1),1000);}else if(timer===0){setResendAvailable(true);clearInterval(interval);}return()=>clearInterval(interval);},[timer,step]);// üîò Send OTP\nconst handleSendOTP=async()=>{try{const sound=new Audio(\"/send.mp3\");// ‚úÖ This file should already exist in public/\nsound.play();const res=await fetch(\"\".concat(process.env.REACT_APP_BACKEND,\"/send-otp\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email})});const data=await res.text();setMessage(data);if(res.ok){setStep(2);setTimer(60);setResendAvailable(false);}}catch(err){setMessage(\"Failed to send OTP.\");}};// ‚úÖ Verify OTP\nconst handleVerifyOTP=async()=>{try{const res=await fetch(\"\".concat(process.env.REACT_APP_BACKEND,\"/verify-otp\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email,otp,newPassword})});const data=await res.text();if(res.ok){setIsSuccess(true);setMessage(data);const sound=new Audio(\"/success.mp3\");sound.play();}else{setMessage(data);}}catch(err){setMessage(\"Verification failed.\");}};if(isSuccess){return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"success-text\",children:\"\\uD83C\\uDF89 Password Reset Successfully!\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/mail.png\",className:\"celebrate-img\",alt:\"Success\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"main-title\",children:\"Reset Your Password\"}),step===1?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Enter Email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendOTP,children:\"Send OTP\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter OTP\",value:otp,onChange:e=>setOtp(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter New Password\",value:newPassword,onChange:e=>setNewPassword(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleVerifyOTP,children:\"Verify & Reset\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u23F3 Resend available in: \",timer,\"s\"]}),resendAvailable&&/*#__PURE__*/_jsx(\"button\",{onClick:handleSendOTP,children:\"\\uD83D\\uDD01 Resend OTP\"})]}),/*#__PURE__*/_jsx(\"p\",{children:message})]});}export default ResetPassword;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResetPassword","email","setEmail","otp","setOtp","newPassword","setNewPassword","step","setStep","message","setMessage","isSuccess","setIsSuccess","timer","setTimer","resendAvailable","setResendAvailable","interval","setInterval","prev","clearInterval","handleSendOTP","sound","Audio","play","res","fetch","concat","process","env","REACT_APP_BACKEND","method","headers","body","JSON","stringify","data","text","ok","err","handleVerifyOTP","className","children","src","alt","type","placeholder","value","onChange","e","target","onClick"],"sources":["C:/Users/Mubarak/Downloads/forget-password-otp-project/frontend/src/resetPassword.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport './App.css';\r\n\r\nfunction ResetPassword() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [otp, setOtp] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [step, setStep] = useState(1);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [isSuccess, setIsSuccess] = useState(false);\r\n  const [timer, setTimer] = useState(60);\r\n  const [resendAvailable, setResendAvailable] = useState(false);\r\n\r\n  // Countdown timer\r\n  useEffect(() => {\r\n    let interval;\r\n    if (step === 2 && timer > 0) {\r\n      interval = setInterval(() => setTimer((prev) => prev - 1), 1000);\r\n    } else if (timer === 0) {\r\n      setResendAvailable(true);\r\n      clearInterval(interval);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [timer, step]);\r\n\r\n  // üîò Send OTP\r\n  const handleSendOTP = async () => {\r\n  try {\r\n    const sound = new Audio(\"/send.mp3\"); // ‚úÖ This file should already exist in public/\r\n    sound.play();\r\n\r\n    const res = await fetch(`${process.env.REACT_APP_BACKEND}/send-otp`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ email }),\r\n    });\r\n\r\n    const data = await res.text();\r\n    setMessage(data);\r\n    if (res.ok) {\r\n      setStep(2);\r\n      setTimer(60);\r\n      setResendAvailable(false);\r\n    }\r\n  } catch (err) {\r\n    setMessage(\"Failed to send OTP.\");\r\n  }\r\n};\r\n\r\n\r\n  // ‚úÖ Verify OTP\r\n  const handleVerifyOTP = async () => {\r\n    try {\r\n      const res = await fetch(`${process.env.REACT_APP_BACKEND}/verify-otp`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, otp, newPassword }),\r\n      });\r\n\r\n      const data = await res.text();\r\n      if (res.ok) {\r\n        setIsSuccess(true);\r\n        setMessage(data);\r\n        const sound = new Audio(\"/success.mp3\");\r\n        sound.play();\r\n      } else {\r\n        setMessage(data);\r\n      }\r\n    } catch (err) {\r\n      setMessage(\"Verification failed.\");\r\n    }\r\n  };\r\n\r\n  if (isSuccess) {\r\n    return (\r\n      <div className=\"page\">\r\n        <h2 className=\"success-text\">üéâ Password Reset Successfully!</h2>\r\n        <img src=\"/mail.png\" className=\"celebrate-img\" alt=\"Success\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <h2 className=\"main-title\">Reset Your Password</h2>\r\n      {step === 1 ? (\r\n        <>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Enter Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n          <br />\r\n          <button onClick={handleSendOTP}>Send OTP</button>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Enter OTP\"\r\n            value={otp}\r\n            onChange={(e) => setOtp(e.target.value)}\r\n          />\r\n          <br />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Enter New Password\"\r\n            value={newPassword}\r\n            onChange={(e) => setNewPassword(e.target.value)}\r\n          />\r\n          <br />\r\n          <button onClick={handleVerifyOTP}>Verify & Reset</button>\r\n          <p>‚è≥ Resend available in: {timer}s</p>\r\n          {resendAvailable && (\r\n            <button onClick={handleSendOTP}>üîÅ Resend OTP</button>\r\n          )}\r\n        </>\r\n      )}\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ResetPassword;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}